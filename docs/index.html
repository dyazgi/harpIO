<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Functions for reading and writing data in the harp framework.
    Readable formats include grib, netCDF, FA, vfld, vobs, SQLite FCTABLE files and
    writeable formats are SQLite FCTABLE files.">
<title>IO functions and data wrangling for harp • harpIO</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="IO functions and data wrangling for harp">
<meta property="og:description" content="Functions for reading and writing data in the harp framework.
    Readable formats include grib, netCDF, FA, vfld, vobs, SQLite FCTABLE files and
    writeable formats are SQLite FCTABLE files.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">harpIO</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/file_options.html">Options for file formats</a>
    <a class="dropdown-item" href="articles/read_raw_forecast.html">Reading forecast model data</a>
    <a class="dropdown-item" href="articles/transformations.html">Transforming forecast model data</a>
    <a class="dropdown-item" href="articles/write_forecast_data.html">Writing forecast model data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/harphub/harpIO/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="harpio-">harpIO <img src="reference/figures/harp_logo_dark.svg" align="right" width="80"><a class="anchor" aria-label="anchor" href="#harpio-"></a>
</h1></div>
<p>{harpIO} provides a set of read and write functions for harp plus the option to transform gridded data to point data, cross sections or other grids at read time. {harpIO} is able to read <em>grib1</em>, <em>grib2</em>, <em>FA</em>, <em>NetCDF</em> and <em>vfld</em> files from weather forecast / climate models; station observations from <em>vobs</em> files, radar / satellite observations from <em>HDF5</em> files and in the future from in-house databases at selected meteorological institutes. Some of these formats require support packages to be installed and you will be given advice on which packages to install when you attempt to read those data.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"harphub/harpIO"</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="system-libraries">System libraries<a class="anchor" aria-label="anchor" href="#system-libraries"></a>
</h3>
<p>{harpIO} uses the <a href="https://github.com/harphub/meteogrid" class="external-link">{meteogrid}</a> package for interpolation and the geogrid class for storing gridded data. This package makes use of the <a href="https://proj4.org" class="external-link">PROJ4</a> library for handling projections. If you do not have PROJ4 installed you can install with:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">sudo</span> apt-get install libproj-dev</span></code></pre></div>
<p>If you do not have sudo rights, speak to your system administrator.</p>
<p>If you have the PROJ libraries installed in a standard location (e.g. /usr/local) meteogrid will install without problems. However, if the PROJ libraries are in a non standard location, you need to tell the install function where they are:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span></span>
<span>  <span class="st">"harphub/harpIO"</span>,</span>
<span>  configure.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    meteogrid <span class="op">=</span> <span class="st">"--with-proj-lib=/path/to/proj/lib --with-proj-include=/path/to/proj/include"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Alternatively you can set environment variables</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="bu">export</span> <span class="va">PROJ_LIBS</span><span class="op">=</span>/path/to/proj/lib</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="bu">export</span> <span class="va">PROJ_INCLUDE</span><span class="op">=</span>/path/to/proj/include</span></code></pre></div>
<p>If you include these environment variables in your .bashrc file, or equivalent, you won’t need to worry about it when you wish to install an update to meteogrid.</p>
<p>Or you can set compiler and linker options in the file $HOME/.R/Makevars</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="va">CPPFLAGS</span><span class="op">=</span>-I/path/to/proj/include</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="va">LDFLAGS</span><span class="op">=</span>-L/path/to/proj/lib <span class="ex">-Wl,-rpath,/path/to/proj/lib</span></span></code></pre></div>
<p>In this case you only have to set them once and not worry about it when you wish to install an update to meteogrid.</p>
<p>When setting environment variables or creating a Makevars file, R must be restarted for the changes to take effect before running <code>remotes::install_github("harphub/harpIO")</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="reading-transforming-and-writing-forecast-data">Reading, transforming and writing forecast data<a class="anchor" aria-label="anchor" href="#reading-transforming-and-writing-forecast-data"></a>
</h2>
<p>The main workhorse for {harpIO} is <code><a href="reference/read_forecast.html">read_forecast()</a></code>. This function can read multiple files from multiple sources of both gridded and point data. See the articles <a href="articles/read_raw_forecast.html">Reading forcast model data</a> and <a href="articles/file_options.html">Options for file formats</a> for more information.</p>
<p>For gridded data you have the option to transform the data to point data, another grid, or a vertical cross section. This is done with the <code>transformation</code> and <code>transformation_opts</code> arguments. Interpolation to points is done by providing a data frame of latitiude and longitude locations, regridding is done by providing a definition of the grid to which to regrid (and if necessary reproject) the data, and a cross section is obtained by providing the latitude and longitude of the end points and reading 3 dimensional data. See the article <a href="articles/transformations.html">Transforming forecast model data</a> for more information.</p>
<p>When data are interpolated to points it is possible to save the result to <a href="https://www.sqlite.org/" class="external-link">SQLite</a> files. These are portable database files that allow fast access to the data with the ability to select and filter what you wish to read. You can tell <code><a href="reference/read_forecast.html">read_forecast()</a></code> to output point data to SQLite files by setting the argument <code>output_file_opts = sqlite_opts(path = "/path/to/output")</code>. These data can then be read with <code><a href="reference/read_point_forecast.html">read_point_forecast()</a></code>. For gridded data there is generally no advantage to outputting to another format, so this option is only available if data are either point data to begin with, or <code>transformation = "interpolate"</code>.</p>
</div>
<div class="section level2">
<h2 id="reading-observation-data">Reading observation data<a class="anchor" aria-label="anchor" href="#reading-observation-data"></a>
</h2>
<p>For point observations, {harpIO} can currently only read from <em>vobs</em> files, as produced by the <a href="http://hirlam.org/index.php/hirlam-programme-53" class="external-link">HIRLAM</a> consortium, and write them out to SQLite files using <code><a href="reference/read_obs_convert.html">read_obs_convert()</a></code> for faster access. The SQLite files can then be read with <code><a href="reference/read_point_obs.html">read_point_obs()</a></code>. For gridded observations, data can be read from <em>NetCDF</em>, <em>grib</em> and some <em>HDF5</em> files using <code><a href="reference/read_grid.html">read_grid()</a></code>. A new function, <code><a href="reference/read_obs.html">read_obs()</a></code>, is currently under development to harmonise the reading and transforming of observations in the same way that forecast data are handled.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/harphub/harpIO/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/harphub/harpIO/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2.0)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing harpIO</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Andrew Singleton <br><small class="roles"> Author, maintainer </small>  </li>
<li>Alex Deckmyn <br><small class="roles"> Author </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Andrew Singleton, Alex Deckmyn.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
