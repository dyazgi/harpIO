<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="read_obs generates file names, based on the arguments given and reads
point observations data from them. The data can optionally be re-written to
files of a different format. Due to the large volumes of data that may be
read, the function will only return data to the calling environment if
return_data = TRUE"><title>Read point observations from multiple files — read_obs • harpIO</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Read point observations from multiple files — read_obs"><meta property="og:description" content="read_obs generates file names, based on the arguments given and reads
point observations data from them. The data can optionally be re-written to
files of a different format. Due to the large volumes of data that may be
read, the function will only return data to the calling environment if
return_data = TRUE"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">harpIO</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/file_options.html">Options for file formats</a>
    <a class="dropdown-item" href="../articles/read_csv_obs.html">Read observations from CSV files</a>
    <a class="dropdown-item" href="../articles/read_raw_forecast.html">Reading forecast model data</a>
    <a class="dropdown-item" href="../articles/transformations.html">Transforming forecast model data</a>
    <a class="dropdown-item" href="../articles/write_forecast_data.html">Writing forecast model data</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/harphub/harpIO/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Read point observations from multiple files</h1>
      <small class="dont-index">Source: <a href="https://github.com/harphub/harpIO/blob/HEAD/R/read_obs.R" class="external-link"><code>R/read_obs.R</code></a></small>
      <div class="d-none name"><code>read_obs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>read_obs</code> generates file names, based on the arguments given and reads
point observations data from them. The data can optionally be re-written to
files of a different format. Due to the large volumes of data that may be
read, the function will only return data to the calling environment if
<code>return_data = TRUE</code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">read_obs</span><span class="op">(</span></span>
<span>  <span class="va">dttm</span>,</span>
<span>  <span class="va">parameter</span>,</span>
<span>  param_defs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/get.html" class="external-link">get</a></span><span class="op">(</span><span class="st">"harp_params"</span><span class="op">)</span>,</span>
<span>  stations <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  file_path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  file_format <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  file_template <span class="op">=</span> <span class="st">"vobs"</span>,</span>
<span>  file_format_opts <span class="op">=</span> <span class="fu"><a href="vfile_opts.html">vfile_opts</a></span><span class="op">(</span><span class="st">"vobs"</span><span class="op">)</span>,</span>
<span>  output_format <span class="op">=</span> <span class="st">"obstable"</span>,</span>
<span>  output_format_opts <span class="op">=</span> <span class="fu"><a href="sqlite_opts.html">obstable_opts</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  return_data <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  start_date <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  end_date <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  by <span class="op">=</span> <span class="st">"1h"</span>,</span>
<span>  reads_per_write <span class="op">=</span> <span class="fl">24</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>dttm</dt>
<dd><p>A vector of date time strings to read. Can be in YYYYMMDD,
YYYYMMDDhh, YYYYMMDDhhmm, or YYYYMMDDhhmmss format. Can be numeric or
character. A vector of date-times can be generated using
<a href="https://rdrr.io/pkg/harpCore/man/seq_dttm.html" class="external-link">seq_dttm</a>.</p></dd>


<dt>parameter</dt>
<dd><p>The names of the parameters to read. By default this is
NULL, meaning that all parameters are read from the observations files.</p></dd>


<dt>param_defs</dt>
<dd><p>A list of parameter definitions that includes the file
format to be read. By default the built in list <code><a href="harp_params.html">harp_params</a></code>
is used. Modifications and additions to this list can be made using
<code><a href="parameter_definitions.html">modify_param_def</a></code> and <code><a href="parameter_definitions.html">add_param_def</a></code>
respectively.</p></dd>


<dt>stations</dt>
<dd><p>The IDs of the stations to read from the files. By default
this is NULL, meaning that observations for all stations are read from the
observations files.</p></dd>


<dt>file_path</dt>
<dd><p>The parent path to all forecast data. All file names are
generated to be under the <code>file_path</code> directory. The default is the
current working directory.</p></dd>


<dt>file_format</dt>
<dd><p>The format of the files to read. By default this is
"vobs", which is the standard format used by the HIRLAM consortium. If set
to something else, <code>read_obs</code> will search the global environment for a
function called <code>read_&lt;file_format&gt;</code> that it will use to read from the
files.</p></dd>


<dt>file_template</dt>
<dd><p>A template for the file names. For available built in
templates see <code><a href="show_file_templates.html">show_file_templates</a></code>. If anything else is
passed, it is returned unmodified, or with substitutions made for dynamic
values. Available substitutions are YYYY for year, {MM} for 2 digit
month with leading zero, {M} for month with no leading zero, and
similarly {DD} or {D} for day, {HH} or {H} for hour, {mm} or
{m} for minute. Note that the full path to the file will always be
file_path/template. Other substitutions can be passed via <code>...</code></p></dd>


<dt>file_format_opts</dt>
<dd><p>Specific options for reading the file format
specified in <code>file_format</code>. Should be a named list, with names
corresponding to argument for <code>read_&lt;file_format&gt;</code>.</p></dd>


<dt>output_format</dt>
<dd><p>The file format to re-write the data to. By default this
is "obstable", which is an sqlite file desgined specifically for the harp
ecosystem. If set to something else, <code>read_obs</code> will search the global
environment for a function called <code>write_&lt;file_format&gt;</code> that it will
use to write to the output file(s).</p></dd>


<dt>output_format_opts</dt>
<dd><p>Specific options for writing to <code>file_format</code>
files. Must be a named list and at least include the names <code>"path"</code>
and <code>"template"</code>. By setting <code>output_format_opts$path</code> to
something other than NULL, <code>read_obs</code> will attempt to write out the
data.</p></dd>


<dt>return_data</dt>
<dd><p>Logical - whether to return the data read in to the
calling environment. Due to the potential for large volumes of data, this
is set to FALSE by default.</p></dd>


<dt>start_date, end_date, by</dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated" class="external-link"><img src="figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a> The use of
<code>start_date</code>, <code>end_date</code> and <code>by</code> is no longer supported. <code>dttm</code> together
with <code><a href="https://rdrr.io/pkg/harpCore/man/seq_dttm.html" class="external-link">seq_dttm</a></code> should be used to generate equally
spaced date-times.</p></dd>


<dt>reads_per_write</dt>
<dd><p>The number of files to read before writing out the
data to new files. Set this to a low number to reduce memory usage. The
default is 24 based on the assumption that there are observations files
every hour and writing should be done once per observation day. For the
default setting of writing to "obstable" files, this number has no impact
on the output since these files can be appended to. For other formats, this
setting might be important to prevent data from being overwritten.</p></dd>


<dt>...</dt>
<dd><p>Other arguments to <code>generate_filenames</code> for getting the names
of files to read.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>If <code>return_data = TRUE</code>, a list with data frames of
observations.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>read_obs</code> is not intended to be used for reading gridded observations.
For this use <a href="read_analysis.html">read_analysis</a> instead.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Andrew Singleton, Alex Deckmyn.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

